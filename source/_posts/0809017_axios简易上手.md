---
id: 0809017
title: axios 简易上手
date: 2018-03-05 10:23:18
tags:
  - ES6
  - ajax
  - Promise
categories:
---

> Promise based HTTP client for the browser and node.js.（`axios` 是一个基于 `promise` 的 `HTTP` 库，可以用在 `浏览器` 和 `node.js` 中。）

<a href="#install">1. 安装</a>
<a href="#example">2. 官网示例</a>
<a href="#apiIntro">3. API 介绍</a>

#### <a name="install">1、安装</a>

使用 npm：
```
$ npm install axios
```
使用 cdn：
```
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

```

#### <a name="example">2、官方示例</a>

- 执行 `GET` 请求：
  ```js
  // 为给定 ID 的 user 创建请求
  axios.get('/user?ID=12345')
  .then((res) => {
    console.log(res);
  })
  .catch((err) => {
    console.log(err)
  });

  // 同样的，上面的请求可以这样做
  axios.get('/user', {
    params: {
      ID: 123
    }
  })
  .then((res) => {
    console.log(res);
  })
  .catch((err) => {
    console.log(err);
  });
  ```

- 执行 `POST` 请求：
  ```js
  axios.post('/user', {
    firstName: 'Fred',
    lastName: 'Flintstone'
  })
  .then((res) => {
    console.log(res);
  })
  .catch((err) => {
    console.log(err);
  });
  ```

- 执行多个并发请求：
  ```js
  function getUserAccount() {
    return axios.get('/user/12345');
  }

  function getUserPermissions() {
    return axios.get('/user/12345/permissions');
  }

  axios.all([getUserAccount(), getUserPermissions()])
  .then(axios.spread((acct, perms) => {
    // 两个请求现在都执行完成
  }));
  ```

#### <a name="apiIntro">3、API 介绍</a>

- 可以通过向 `axios` 传递相关配置来创建请求：

  axios(config)
  ```js
  // 发送 POST 请求
  axios({
    method: 'post',
    url: '/user/12345',
    data: {
      firstName: 'Fred',
      lastName: 'Flintstone'
    }
  });
  ```
  ```js
  // GET 请求远程图片
  axios({
    method:'get',
    url:'http://bit.ly/2mTM3nY',
    responseType:'stream'
  })
  .then((response) => {
  response.data.pipe(fs.createWriteStream('ada_lovelace.jpg'))
  });
  ```
  axios(url[, config])
  ```js
    // 发送 GET 请求（默认的方法）
    axios('/user/12345');
```

- 请求方法的别名

  为方便起见，为所有支持的请求方法提供了别名
  ```js
  axios.request(config)
  axios.get(url[, config])
  axios.delete(url[, config])
  axios.head(url[, config])
  axios.post(url[, data[, config]])
  axios.put(url[, data[, config]])
  axios.patch(url[, data[, config]])
  ```