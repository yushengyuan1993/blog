<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="iysy@foxmail.com"><title>codeing中常用到的tips · yushare</title><meta name="description" content="1. 获取json的key值
2. JS实时监听文本域的变化
3. JavaScript类型检验


1. 获取json的 key 值12var obj = &amp;#123; name: &quot;naruto&quot;, age: 23, dad: &quot;minato&quot;&amp;#125;`
1.1. 使用 for in 来循环"><meta name="keywords" content="HTML,CSS,JAVASCRIPT"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><a href="https://www.yvshare.cn"><img src="/images/logo@2x.png" style="width:328px;"></a><div class="description"><p>record life bit by bit.</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/yushengyuan"><i class="fa fa-twitter"></i></a></li><li><a href="https://github.com/yushengyuan1993"><i class="fa fa-github"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Powered by Hexo</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div><div class="search"><div class="widget"><input class="st-default-search-input" placeholder="搜索文章" type="text"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>codeing中常用到的tips</a></h3></div><div class="post-content"><ul>
<li><a href="#getKey">1. 获取json的<code>key</code>值</a></li>
<li><a href="#input">2. JS实时监听文本域的变化</a></li>
<li><a href="#checkType">3. JavaScript类型检验</a></li>
</ul>
<hr>
<h4 id="1-获取json的-key-值"><a href="#1-获取json的-key-值" class="headerlink" title="1. 获取json的 key 值"></a><a name="getKey">1. </a>获取json的 <code>key</code> 值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"naruto"</span>, <span class="attr">age</span>: <span class="number">23</span>, <span class="attr">dad</span>: <span class="string">"minato"</span>&#125;</span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure>
<h5 id="1-1-使用-for-in-来循环"><a href="#1-1-使用-for-in-来循环" class="headerlink" title="1.1. 使用 for in 来循环 :"></a>1.1. 使用 <code>for in</code> 来循环 :</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key) <span class="comment">// 依次输出 "name", "age", "dad"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种方法比较常见，相信大家看到这个问题时第一时间都会想到吧，但是我要介绍的是下面这个更简单的方法。</p>
<h5 id="1-2-使用-Object-keys-来获取"><a href="#1-2-使用-Object-keys-来获取" class="headerlink" title="1.2. 使用 Object.keys() 来获取 :"></a>1.2. 使用 <code>Object.keys()</code> 来获取 :</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- console.log( Object.keys(obj) ) // 输出一个数组 [&quot;name&quot;, &quot;age&quot;, &quot;dad&quot;]</span><br><span class="line">- 所以, 当我们需要某个key值时可以从当前数组中取得。</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="2-JS实时监听文本域的变化"><a href="#2-JS实时监听文本域的变化" class="headerlink" title="2. JS实时监听文本域的变化"></a><a name="input">2. JS实时监听文本域的变化</a></h4><p>众所周知，使用 <code>onchange</code> 事件来监听文本域的变化是我们在开发中用到的最多的方法。但是， <code>onchange</code> 是在文本域失焦时才触发，有时候由于需求的原因，需要我们来实时监听文本域的变化，除了使用<code>keydown</code>和<code>keyup</code>外，我们还可以:</p>
<h5 id="2-1-使用-onpropertychange"><a href="#2-1-使用-onpropertychange" class="headerlink" title="2.1. 使用 onpropertychange"></a>2.1. 使用 <code>onpropertychange</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> id=<span class="string">"txt"</span>&gt;</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#ysy"</span>).bind(<span class="string">'input propertychange'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="2-2-使用-oninput"><a href="#2-2-使用-oninput" class="headerlink" title="2.2 使用 oninput"></a>2.2 使用 <code>oninput</code></h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'txt'</span>).oninput = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，总结一下<code>onchange, onpropertychange</code>和<code>oninput</code>之间的异同：</p>
<ol>
<li><code>onchange</code>事件与<code>onpropertychange</code>事件的区别：<code>onchange</code>事件在内容改变（两次内容有可能还是相等的）且失去焦点时触发；<code>onpropertychange</code>事件却是实时触发，即每增加或删除一个字符就会触发，通过js改变也会触发该事件，但是该事件IE专有。</li>
<li><code>oninput</code>事件与<code>onpropertychange</code>事件的区别：<code>oninput</code>事件是IE之外的大多数浏览器支持的事件，在value改变时触发，实时的，即每增加或删除一个字符就会触发，然而通过js改变value时，却不会触发；<code>onpropertychange</code>事件是任何属性改变都会触发的，而<code>oninput</code>却只在value改变时触发，<code>oninput</code>要通过<code>addEventListener()</code>来注册，<code>onpropertychange</code>注册方式跟一般事件一样。（此处都是指在js中动态绑定事件，以实现内容与行为分离）&gt;</li>
<li><code>oninput</code>与<code>onpropertychange</code>失效的情况：  （1）<code>oninput</code>事件：a). 当脚本中改变value时，不会触发；b).从浏览器的自动下拉提示中选取时，不会触发。  （2）<code>onpropertychange</code>事件：当input设置为<code>disable=true</code>后，onpropertychange不会触发。</li>
</ol>
<hr>
<h4 id="3-JavaScript类型检验"><a href="#3-JavaScript类型检验" class="headerlink" title="3. JavaScript类型检验"></a><a name="checkType">3. JavaScript类型检验</a></h4><p>一个简单有用的js类型检验的方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkType</span>(<span class="params">sth</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(o)</span><br><span class="line">    .match(<span class="regexp">/(\w+)\]$/</span>)[<span class="number">1</span>]</span><br><span class="line">    .toLowerCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">checkType(&#123;&#125;)               <span class="comment">// object</span></span><br><span class="line">checkType([])               <span class="comment">// array</span></span><br><span class="line">checkType(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)     <span class="comment">// function</span></span><br><span class="line">checkType(<span class="number">1</span>)                <span class="comment">// number</span></span><br><span class="line">checkType(+<span class="string">'3'</span>)             <span class="comment">// number</span></span><br><span class="line">checkType(<span class="number">3</span>+<span class="string">''</span>)             <span class="comment">// string</span></span><br></pre></td></tr></table></figure></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2079-01-01</span><i class="fa fa-tag"></i><a class="tag" href="/tags/JavaScript/" title="JavaScript">JavaScript </a><a class="tag" href="/tags/other/" title="other">other </a><a class="tag" href="/tags/置顶/" title="置顶">置顶 </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://111.231.78.140/2079/01/01/0809003/,yushare,codeing中常用到的tips,;"></a></div></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zNDQ3NC8xMTAxMQ=="></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a class="btn" role="navigation" href="/2018/03/02/0809013/" title="常用的markdown语法">下一篇</a></li></ul></div></div></div></div></div><script src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script><script src="https://cdn.bootcss.com/jquery-migrate/1.2.1/jquery-migrate.min.js"></script><script src="https://cdn.bootcss.com/jquery.appear/0.3.3/jquery.appear.min.js"></script><script src="/js/livere.js"></script></body></html>